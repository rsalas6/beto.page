---
import Layout from "@layouts/Layout.astro";
---

<Layout title="404 - Perdido en el c√≥digo" description="La p√°gina que buscas no existe.">
  <main class="min-h-screen flex items-center justify-center px-6">
    <div class="text-center max-w-lg">
      <!-- Glitchy 404 -->
      <div class="relative mb-8">
        <h1 class="text-[10rem] md:text-[14rem] font-bold leading-none select-none glitch" data-text="404">
          404
        </h1>
      </div>

      <!-- Terminal-style message -->
      <div class="bg-[var(--color-bg-alt)] border border-[var(--color-border)] rounded-lg p-6 mb-8 text-left font-mono text-sm">
        <div class="flex items-center gap-2 mb-4 pb-3 border-b border-[var(--color-border)]">
          <span class="w-3 h-3 rounded-full bg-red-500"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-500"></span>
          <span class="w-3 h-3 rounded-full bg-green-500"></span>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs">~/beto.page</span>
        </div>
        <div class="space-y-2">
          <p><span class="text-[#7cb872]">$</span> <span class="text-[var(--color-text)]">find</span> <span class="text-[var(--color-text-muted)]">p√°gina_solicitada</span></p>
          <p class="text-red-400">Error: No such file or directory</p>
          <p class="text-[var(--color-text-muted)]">La p√°gina que buscas se fue a tomar un caf√©...</p>
          <p class="text-[var(--color-text-muted)]">o quiz√°s nunca existi√≥.</p>
          <p class="mt-4"><span class="text-[#7cb872]">$</span> <span class="animate-pulse">_</span></p>
        </div>
      </div>

      <!-- Fun suggestions -->
      <p class="text-[var(--color-text-muted)] mb-6">
        Mientras tanto, puedes:
      </p>

      <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
        <a
          href="/"
          class="px-6 py-3 bg-[#7cb872] text-black font-medium rounded-lg hover:bg-[#6aa862] transition-colors cursor-pointer"
        >
          Volver al inicio
        </a>
        <a
          href="/tools"
          class="px-6 py-3 border border-[var(--color-border)] rounded-lg hover:border-[#7cb872] hover:text-[#7cb872] transition-colors cursor-pointer"
        >
          Explorar herramientas
        </a>
      </div>

      <!-- Easter egg counter -->
      <p class="mt-12 text-xs text-[var(--color-text-muted)]">
        Has visitado esta p√°gina <span id="visit-count" class="text-[#7cb872] font-mono">0</span> veces.
        <span id="message" class="block mt-1"></span>
      </p>
    </div>
  </main>
</Layout>

<style>
  .glitch {
    color: var(--color-text);
    position: relative;
    animation: glitch-skew 1s infinite linear alternate-reverse;
  }

  .glitch::before,
  .glitch::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .glitch::before {
    color: #7cb872;
    animation: glitch-effect 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
    clip-path: polygon(0 0, 100% 0, 100% 35%, 0 35%);
    transform: translate(-2px, -2px);
    opacity: 0.7;
  }

  .glitch::after {
    color: #ef4444;
    animation: glitch-effect 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) reverse both infinite;
    clip-path: polygon(0 65%, 100% 65%, 100% 100%, 0 100%);
    transform: translate(2px, 2px);
    opacity: 0.7;
  }

  @keyframes glitch-effect {
    0% {
      transform: translate(0);
    }
    20% {
      transform: translate(-3px, 3px);
    }
    40% {
      transform: translate(-3px, -3px);
    }
    60% {
      transform: translate(3px, 3px);
    }
    80% {
      transform: translate(3px, -3px);
    }
    100% {
      transform: translate(0);
    }
  }

  @keyframes glitch-skew {
    0% {
      transform: skew(0deg);
    }
    10% {
      transform: skew(-0.5deg);
    }
    20% {
      transform: skew(0.5deg);
    }
    30% {
      transform: skew(0deg);
    }
    100% {
      transform: skew(0deg);
    }
  }
</style>

<script>
  const countEl = document.getElementById('visit-count');
  const messageEl = document.getElementById('message');

  let count = parseInt(localStorage.getItem('404-visits') || '0') + 1;
  localStorage.setItem('404-visits', count.toString());

  if (countEl) countEl.textContent = count.toString();

  if (messageEl) {
    if (count === 1) {
      messageEl.textContent = '¬°Primera vez! No te preocupes, pasa.';
    } else if (count < 5) {
      messageEl.textContent = '¬øOtra vez por aqu√≠?';
    } else if (count < 10) {
      messageEl.textContent = '¬øTe gusta este lugar? ü§î';
    } else {
      messageEl.textContent = '¬°Ya eres un experto en perderte! üèÜ';
    }
  }
</script>
