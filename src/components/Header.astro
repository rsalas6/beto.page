---
import ThemeToggle from "./ThemeToggle.astro";

interface Props {
  lang?: "es" | "en";
  currentPage?: string;
}

const { lang = "es", currentPage = "" } = Astro.props;

const isSpanish = lang === "es";

const navItems = isSpanish
  ? [
      { href: "/", label: "Inicio" },
      { href: "/projects", label: "Proyectos" },
      { href: "/tools", label: "Tools" },
      { href: "/resume", label: "CV" },
    ]
  : [
      { href: "/en", label: "Home" },
      { href: "/en/projects", label: "Projects" },
      { href: "/en/tools", label: "Tools" },
      { href: "/en/resume", label: "Resume" },
    ];

const serviciosLabel = isSpanish ? "Servicios" : "Services";
const langSwitchHref = isSpanish
  ? `/en${currentPage}`
  : currentPage.replace(/^\/en/, '') || "/";
const langSwitchLabel = isSpanish ? "EN" : "ES";
---

<header class="fixed top-0 left-0 right-0 z-50 bg-[var(--color-bg)]/90 backdrop-blur-sm border-b border-[var(--color-border)]">
  <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
    <a href={isSpanish ? "/" : "/en"} class="font-serif text-2xl italic tracking-tight hover:text-[#7cb872] transition-colors">
      rs<span class="text-[#7cb872]">.</span>
    </a>
    <nav class="flex items-center gap-6">
      {navItems.map((item) => (
        <a
          href={item.href}
          class={`text-sm tracking-wide transition-colors ${
            currentPage === item.href || (currentPage === "" && item.href === "/" || item.href === "/en")
              ? "text-[var(--color-text)]"
              : "text-[var(--color-text-muted)] hover:text-[var(--color-text)]"
          }`}
        >
          {item.label}
        </a>
      ))}
      <a href="https://saltek.mx" target="_blank" class="text-sm tracking-wide text-[#7cb872] hover:underline transition-colors">
        {serviciosLabel}
      </a>
      <ThemeToggle />
      <a
        href={langSwitchHref}
        class="text-xs px-3 py-1.5 rounded-full border border-[var(--color-border)] text-[var(--color-text-muted)] hover:text-[var(--color-text)] hover:border-[var(--color-text-subtle)] transition-all"
      >
        {langSwitchLabel}
      </a>
    </nav>
  </div>
</header>

<style>
  .font-serif {
    font-family: 'Playfair Display', Georgia, serif;
  }
</style>
